function objGetValue(value,objoptions,id){var value,id;return{value:objoptions.value,id:objoptions.obj.id}}app.controller("ctrl_boutique",["$scope","Dataservice",function($scope,Dataservice){function FilterPrice(Price_val,serviceSelected){$.ajax({type:"POST",url:Urlprice,timeout:2e3,data:{Price:Price_val,service:serviceSelected},success:function(data){data_app=data.result.Database[0].Table.Row[0],filter(data_app)},error:function(textStatus,err){console.log(textStatus+""+err)}})}function FilterServices(serviceSelected,subService){$.ajax({type:"POST",url:Urlservice,timeout:2e3,data:{Service:serviceSelected,subService:subService,ubication:""},success:function(data){var data_app;filter(data.result.Database[0].Table.Row[0])},error:function(textStatus,err){alert("text status "+textStatus+", err "+err)}})}function FilterHoursNow(Hora,day){$.ajax({type:"POST",url:Urlhour,timeout:2e3,data:{days:day,hours:Hora},success:function(data){var data_app;filter(data.result.Database[0].Table.Row[0])},error:function(textStatus,err){console.log(textStatus+"  "+err)}})}function FilterMPrice(){$.ajax({type:"POST",url:UrlMP,timeout:2e3,data:"",dataType:"json",success:function(data){var data_app;filter(data.result.Database[0].Table.Row[0])},error:function(textStatus,err){console.log(textStatus+"  "+err)}})}function filterFor(dataUrl){null==dataUrl.Search?(Serv="",Ubication=dataUrl.ubicacion):(Serv=dataUrl.Search,Ubication=""),sendFilter(Serv,Ubication)}function sendFilter(Serv,Ubication){$.ajax({type:"POST",url:Urlservice,timeout:2e3,data:{Service:Serv,subService:"",ubication:Ubication},success:function(data){var data_app;filter(data.result.Database[0].Table.Row[0])},error:function(textStatus,err){alert("text status "+textStatus+", err "+err)}})}function SendFilterZonas(zonas){$.ajax({type:"POST",url:UrlZonas,timeout:2e3,data:{zonas:zonas},success:function(data){var data_app;filter(data.result.Database[0].Table.Row[0])},error:function(textStatus,err){alert("text status "+textStatus+", err "+err)}})}function filter(data_app){$scope.$apply($scope.NSelected=data_app,$scope.Nresultado=data_app.length),0===data_app.length&&(alertify.set("notifier","position","top-left"),alertify.error("no se encontraron resultados"))}function filterTwo(data_app){$scope.NSelected=data_app,$scope.Nresultado=data_app.length,messageResult()}function messageResult(){0===data_app.length?($scope.resultNotFound=`No se encontro ningún resultado para ${$scope.resulOfSearch}`,alertify.set("notifier","position","top-left"),alertify.error("no se encontraron resultados")):(alertify.set("notifier","position","top-left"),alertify.notify("Resultado de la busqueda de "+$scope.resulOfSearch))}function hideMessage(){$scope.resulText=!1}function dblClick_and_Click(objoptions){switch(objoptions.from){case"Price":var{value:value,id:id}=objGetValue(value,objoptions,id),FunctionX;optionClick(value,id,FunctionX=FilterPrice(value,serviceSelected));break;case"zonas":var{value:value,id:id}=objGetValue(value,objoptions,id),FunctionX;optionClick(value,id,FunctionX=SendFilterZonas(value));break;case"service":var{value:value,id:id}=objGetValue(value,objoptions,id),FunctionX;subService="",optionClick(value,id,FunctionX=FilterServices(value,subService));break;case"subservice":var{value:value,id:id}=objGetValue(value,objoptions,id),service,FunctionX;optionClick(value,id,FunctionX=FilterServices(objoptions.service,value));break;case"hours":var{value:value,id:id}=objGetValue(value,objoptions,id),day,FunctionX;optionClick(value,id,FunctionX=FilterHoursNow(value,objoptions.valueTwo));break;default:return!1}}function optionClick(value,id,FunctionX){0==click?(valueOld=value,click++,console.log(click)):valueOld!=value?(document.getElementById(id).checked=!0,click=0):(document.getElementById(id).checked=!1,click=0,$scope.LoadDataPages(),$scope.subServiceshide=!0)}$scope.Price=objPrice,$scope.Services=objServices,$scope.data=objservicesOptions,$scope.subservices="",$scope.zonasPanama=modelZonasPanama,$scope.ObjSearchAdvanced=ObjSearchJSON,$scope.resulOfSearch=ObjresultJSON,$scope.getPrice=function(p){var Price_val=document.getElementById(p.id).value,objoptions;hideMessage(),dblClick_and_Click({from:"Price",value:Price_val,obj:p})},$scope.filterZonas=function(z){var zonas=z.name,objoptions;hideMessage(),dblClick_and_Click({from:"zonas",value:zonas,obj:z})},$scope.getService=function(service){var Serv=document.getElementById(service.id).value,objoptions;serviceSelected=Serv,$scope.showChecboxSubservic(Serv),$scope.subServiceshide=!1,subService="",hideMessage(),dblClick_and_Click({from:"service",value:serviceSelected,obj:service})},$scope.getSubService=function(subservice){serviceSelected;var subService=document.getElementById(subservice.id).value,objoptions;hideMessage(),dblClick_and_Click({from:"subService",value:subService,service:serviceSelected,obj:subservice})},$scope.getHours=function(){var hour=new Date,Hora=hour.getHours()+":"+hour.getMinutes()+":00",day=Dataservice.GetDay(),h,objoptions;hideMessage(),obj={id:"abierto"},dblClick_and_Click({from:"hours",value:Hora,valueTwo:day,obj:obj})},$scope.clickaction=function(obj){var Option=obj.data.selectedOption.id;hideMessage(),"MP"==Option?FilterMPrice():"Popularidad"==Option||("Promociones"==Option?$scope.promotion():"Orden"==Option||(Serv=Option,subService="",FilterServices(Serv,subService)))},$scope.promotion=function(){$.ajax({type:"POST",url:Urlpromotion,timeout:2e3,data:"",success:function(data){data_app=data.result.Database[0].Table.Row[0],filter(data_app)},error:function(textStatus,err){console.log(textStatus+""+err)}})},$scope.LoadDataPages=function(){dataUrl=Dataservice.GetFilter(),null!=dataUrl?filterFor(dataUrl):null!=$scope.ObjSearchAdvanced?($scope.resulText=!0,data_app=$scope.ObjSearchAdvanced[0],filterTwo(data_app),setTimeout(()=>{localStorage.clear(),$scope.ObjSearchAdvanced=null},2e3)):($scope.resulText=!1,Dataservice.GetToAllEstablecimiento().then(function(data){$scope.NSelected=data.data.result.Database[0].Table.Row[0],$scope.Nresultado=$scope.NSelected.length}))},$scope.showChecboxSubservic=function(Serv){switch(Serv){case"Salones":$scope.subservices=objsubServicesSalones;break;case"Barberias":$scope.subservices=objsubServiceBarberia;break;case"Estética":$scope.subservices=objsubServiceEstetica;break;case"Clínicas Dentales":$scope.subservices=objsubServiceClinicas;break;case"Functional Training":$scope.subservices=objsubServiceFunctional;break;case"Cejas y Pestañas":$scope.subservices=objsubServiceCejasPesta;break;case"Uñas":$scope.subservices=objsubServiceUñas;break;case"Depilación":$scope.subservices=objsubServiceDepilacion;break;case"Masajes y Spa":$scope.subservices=objsubServiceMasajesEspa;break;default:alert("a ocurrido un error Contacte al administrador de la Pagina")}},$scope.LoadDataPages()}]);
app.controller("ctrl-create",["$scope",function(e){function o(){e.addHours=!0,e.uploadImagesServer=!1}function a(o){$.ajax({type:"POST",url:UrlLocalInsert,timeout:2e3,data:{direction:o[0].direction,imagenPrincipal:o[0].imagenPrincipal,name:o[0].name,price:o[0].price,promotion:"",tel:o[0].telefono,mapa:o[0].mapa},success:function(o){data_app=o.result.Database[0].Table.Row[0],e.idUser=data_app,id.push({id:e.idUser[0].id}),alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(e,o){console.log(e+""+o)}})}function r(o){$.ajax({type:"POST",url:UrlServInsert,timeout:2e3,data:{subService:o[0].othersServ,service:o[0].servicioPrincipal,id:e.idUser[0].id},success:function(e){data_app=e,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(e,o){console.log(e+""+o)}})}function s(){$.ajax({type:"POST",url:UrlInsertHour,timeout:2e3,data:e.Horario[0],success:function(o){data_app=o.result.Database[0].Table.Row[0],e.idUser=data_app,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(e,o){console.log(e+""+o)}})}function i(o){console.log(e.idUser[0].id),$.ajax({type:"POST",url:UrlPayMethod,timeout:2e3,data:{pay:o,id:e.idUser[0].id},success:function(e){data_app=e.result.Database[0].Table.Row[0],alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(e,o){console.log(e+""+o)}})}e.ubication=objectUbication,e.weekdays=objectweekdays,e.Services=objServices,e.daysweek=daysweek,e.Price=objPrice,e.methodPay=methodPay,e.subservice="",e.price="",e.service="",e.serviceoptional=!0,e.personalInformation=!1,e.typeService=!0,e.imageslocal=!0,e.methodP=!0,e.addHours=!0,e.responseUser=!0,e.personalinfomationdone=!0,e.servicedone=!0,e.lunesViernes=!1,e.lunesSabado=!1,e.Personalisation=!1,e.imgOfLocal=objImagesLocal,e.Users=objUserAdminRolOne,e.Horario=horario,e.uploadImagesServer=!1,e.edit=!0,e.buttonEdit=!0,e.HourDay=!0,e.DoneEstablishment=!0,e.showChecboxSubservic=function(o){switch(o){case"Salones":e.serviceoptional=!1,e.subservice=objsubServicesSalones;break;case"Barberias":e.serviceoptional=!1,e.subservice=objsubServiceBarberia;break;case"Estética":e.serviceoptional=!1,e.subservice=objsubServiceEstetica;break;case"Clínicas":e.serviceoptional=!1,e.subservice=objsubServiceClinicas;break;case"Functional Training":case"Cejas y Pestañas":e.serviceoptional=!1,e.subservice=objsubServiceCejasPesta;break;case"Uñas":e.serviceoptional=!1,e.subservice=objsubServiceUñas;break;case"Depilación":e.serviceoptional=!1,e.subservice=objsubServiceDepilacion;break;case"Masajes y Spa":e.serviceoptional=!1,e.subservice=objsubServiceMasajesEspa;break;default:alertify.set("notifier","position","top-left"),alertify.error("A ocurrido un error, sus datos no se estan Guardando Correctamente  Vuelva a Intentarlos o contacte al administrador de este sitio.")}},e.obtainData=function(o){function a(){e.responseUser=!1,e.validateresponseUser("yes")}function r(){alertify.set("notifier","position","top-right"),alertify.error("Todos los Campos son Obligatorios")}Name=document.getElementById("Name_local").value,telefono=document.getElementById("Tel").value,mapa=document.getElementById("mapa").value,direction=o.ubication.selectedOption.name+","+document.getElementById("idInformation").value,e.imagesP=imagesP[0].images,promotion="",Name&&telefono&&direction&&""!=e.imagesP?a():r()},e.validateresponseUser=function(o){if("yes"==o){objdataform.push(infoServ=[{name:Name,direction:direction,telefono:"507"+telefono,mapa:mapa,promociones:"",price:e.price,imagenPrincipal:e.imagesP}]);var r=objdataform[0];e.personalInformation=!0,e.typeService=!1,a(r)}},e.getIdPrice=function(o){Price=o.p.Price,e.price=Price},e.getsubservice=function(o){e.buttonEdit=!1;var a=o.subserv.Service;e.subService=a,objservicesgetothers.push(e.subService)},e.pushServiceAndSub=function(){objservicesget.push({servicioPrincipal:e.service,othersServ:objservicesgetothers}),e.typeService=!0,e.imageslocal=!1,r(objservicesget)},e.getIdServ=function(o){e.buttonEdit=!0;var a=o.s.Service;e.service=a,e.showChecboxSubservic(a)},e.EditServ=function(){e.service="",activecheckboxServ()},e.ValidateImages=function(){objImagesLocal[0].imagenlocal.imageslocalOne&&""!=objImagesLocal[0].imagenlocal.imageslocalTwo&&(e.imageslocal=!0,e.methodP=!1,$.ajax({type:"POST",url:urlInserImages,timeout:2e3,data:{imgOne:objImagesLocal[0].imagenlocal.imageslocalOne,imgTwo:objImagesLocal[0].imagenlocal.imageslocalTwo,id:e.idUser[0].id},success:function(e){data_app=e},error:function(e,o){console.log(e+""+o)}}))},e.getmethodPay=function(e){var o=e.Pay.method;objMethodPay.push(o)},e.sendMethod=function(){e.methodP=!0,e.addHours=!1,i(objMethodPay)},e.validateBtnHour=function(o){switch(o){case"LV":e.lunesViernes=!1,e.lunesSabado=!0,e.Personalisation=!0;break;case"LS":e.lunesSabado=!1,e.Personalisation=!0,e.lunesViernes=!0;break;case"P":e.lunesSabado=!0,e.Personalisation=!1,e.lunesViernes=!0;break;case"all":e.lunesSabado=!1,e.Personalisation=!1,e.lunesViernes=!1}},e.octainselectweekdays=function(o){switch(open=document.getElementById(`openMonday${o}_id`).value,close=document.getElementById(`closeMonday${o}_id`).value,o){case"V":LunesVienes(),setTimeout(()=>{s()},2e3),e.addHours=!0,e.uploadImagesServer=!1,e.DoneEstablishment=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ");break;case"S":LunesSabado(),setTimeout(()=>{s()},2e3),e.addHours=!0,e.DoneEstablishment=!1,e.uploadImagesServer=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ");break;default:alert("A ocurrido un eror contacte al admin de la pagina ")}},e.inputHours=function(e){day=e.d.id,HoursA=document.getElementById(e.d.id_HoursA).value,HoursC=document.getElementById(e.d.id_HoursC).value;var o=`${HoursA}:00`,a=`${HoursC}:00`;objHoursEstablishment.push({horario:{dia:day,horaEntrada:o,horaCierre:a}})},e.sendHour=function(){var a={Lunes:objHoursEstablishment[0].horario.dia,L_apertura:objHoursEstablishment[0].horario.horaEntrada+":00",L_cierre:objHoursEstablishment[0].horario.horaCierre+":00",Martes:objHoursEstablishment[1].horario.dia,M_apertura:objHoursEstablishment[1].horario.horaEntrada+":00",M_cierre:objHoursEstablishment[1].horario.horaCierre+":00",Miercoles:objHoursEstablishment[2].horario.dia,Mi_apertura:objHoursEstablishment[2].horario.horaEntrada+":00",Mi_cierre:objHoursEstablishment[2].horario.horaCierre+":00",Jueves:objHoursEstablishment[3].horario.dia,J_apertura:objHoursEstablishment[3].horario.horaEntrada+":00",J_cierre:objHoursEstablishment[3].horario.horaCierre+":00",Viernes:objHoursEstablishment[4].horario.dia,V_apertura:objHoursEstablishment[4].horario.horaEntrada+":00",V_cierre:objHoursEstablishment[4].horario.horaCierre+":00",Sabado:objHoursEstablishment[5].horario.dia,S_apertura:objHoursEstablishment[5].horario.horaEntrada+":00",S_cierre:objHoursEstablishment[5].horario.horaCierre+":00",Domingo:objHoursEstablishment[5].horario.dia,D_apertura:objHoursEstablishment[5].horario.horaEntrada+":00",D_cierre:objHoursEstablishment[5].horario.horaCierre+":00",id:e.idUser[0].id};$.ajax({type:"POST",url:UrlInsertHour,timeout:2e3,data:a,success:function(a){data_app=a.result.Database[0].Table.Row[0],e.idUser=data_app,e.DoneEstablishment=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente "),o()},error:function(e,o){console.log(e+""+o)}})},""!=e.Users&&null!=e.Users||(location.href="/")}]);
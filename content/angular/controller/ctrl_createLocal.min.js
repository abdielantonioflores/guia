app.controller("ctrl-create",["$scope",function($scope){function doneInsert(){$scope.addHours=!0,$scope.uploadImagesServer=!1}function InserDataPersonal(dataUsers){$.ajax({type:"POST",url:UrlLocalInsert,timeout:2e3,data:{direction:dataUsers[0].direction,imagenPrincipal:dataUsers[0].imagenPrincipal,name:dataUsers[0].name,price:dataUsers[0].price,promotion:"",tel:dataUsers[0].telefono,mapa:dataUsers[0].mapa},success:function(data){data_app=data.result.Database[0].Table.Row[0],$scope.idUser=data_app,id.push({id:$scope.idUser[0].id}),alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(textStatus,err){console.log(textStatus+""+err)}})}function insertServise(objservicesget){$.ajax({type:"POST",url:UrlServInsert,timeout:2e3,data:{subService:objservicesget[0].othersServ,service:objservicesget[0].servicioPrincipal,id:$scope.idUser[0].id},success:function(data){data_app=data,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(textStatus,err){console.log(textStatus+""+err)}})}function InsertHour(){$.ajax({type:"POST",url:UrlInsertHour,timeout:2e3,data:$scope.Horario[0],success:function(data){data_app=data.result.Database[0].Table.Row[0],$scope.idUser=data_app,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(textStatus,err){console.log(textStatus+""+err)}})}function insertMethodPay(objMethodPay){$.ajax({type:"POST",url:UrlPayMethod,timeout:2e3,data:{pay:objMethodPay,id:$scope.idUser[0].id},success:function(data){data_app=data.result.Database[0].Table.Row[0],alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ")},error:function(textStatus,err){console.log(textStatus+""+err)}})}$scope.ubication=objectUbication,$scope.weekdays=objectweekdays,$scope.Services=objServices,$scope.daysweek=daysweek,$scope.Price=objPrice,$scope.methodPay=methodPay,$scope.subservice="",$scope.price="",$scope.service="",$scope.serviceoptional=!0,$scope.personalInformation=!1,$scope.typeService=!0,$scope.imageslocal=!0,$scope.methodP=!0,$scope.addHours=!0,$scope.responseUser=!0,$scope.personalinfomationdone=!0,$scope.servicedone=!0,$scope.lunesViernes=!1,$scope.lunesSabado=!1,$scope.Personalisation=!1,$scope.imgOfLocal=objImagesLocal,$scope.Users=objUserAdminRolOne,$scope.Horario=horario,$scope.uploadImagesServer=!1,$scope.edit=!0,$scope.buttonEdit=!0,$scope.HourDay=!0,$scope.DoneEstablishment=!0,$scope.showChecboxSubservic=function(Serv){switch(Serv){case"Salones":$scope.serviceoptional=!1,$scope.subservice=objsubServicesSalones;break;case"Barberias":$scope.serviceoptional=!1,$scope.subservice=objsubServiceBarberia;break;case"Estética":$scope.serviceoptional=!1,$scope.subservice=objsubServiceEstetica;break;case"Clínicas Dentales":$scope.serviceoptional=!1,$scope.subservice=objsubServiceClinicas;break;case"Functional Training":case"Cejas y Pestañas":$scope.serviceoptional=!1,$scope.subservice=objsubServiceCejasPesta;break;case"Uñas":$scope.serviceoptional=!1,$scope.subservice=objsubServiceUñas;break;case"Depilación":$scope.serviceoptional=!1,$scope.subservice=objsubServiceDepilacion;break;case"Masajes y Spa":$scope.serviceoptional=!1,$scope.subservice=objsubServiceMasajesEspa;break;default:alertify.set("notifier","position","top-left"),alertify.error("A ocurrido un error, sus datos no se estan Guardando Correctamente  Vuelva a Intentarlos o contacte al administrador de este sitio.")}},$scope.obtainData=function(obj){function responseTrue(){$scope.responseUser=!1,$scope.validateresponseUser("yes")}function responseFalse(){alertify.set("notifier","position","top-right"),alertify.error("Todos los Campos son Obligatorios")}Name=document.getElementById("Name_local").value,telefono=document.getElementById("Tel").value,mapa=document.getElementById("mapa").value,direction=obj.ubication.selectedOption.name+","+document.getElementById("idInformation").value,$scope.imagesP=imagesP[0].images,promotion="",Name&&telefono&&direction&&""!=$scope.imagesP?responseTrue():responseFalse()},$scope.validateresponseUser=function(opc){if("yes"==opc){objdataform.push(infoServ=[{name:Name,direction:direction,telefono:"507"+telefono,mapa:mapa,promociones:"",price:$scope.price,imagenPrincipal:$scope.imagesP}]);var dataUsers=objdataform[0];$scope.personalInformation=!0,$scope.typeService=!1,InserDataPersonal(dataUsers)}},$scope.getIdPrice=function(obj){Price=obj.p.Price,$scope.price=Price},$scope.getsubservice=function(obj){$scope.buttonEdit=!1;var subServ=obj.subserv.Service;$scope.subService=subServ,objservicesgetothers.push($scope.subService)},$scope.pushServiceAndSub=function(){objservicesget.push({servicioPrincipal:$scope.service,othersServ:objservicesgetothers}),$scope.typeService=!0,$scope.imageslocal=!1,insertServise(objservicesget)},$scope.getIdServ=function(obj){$scope.buttonEdit=!0;var Serv=obj.s.Service;$scope.service=Serv,$scope.showChecboxSubservic(Serv)},$scope.EditServ=function(){$scope.service="",activecheckboxServ()},$scope.ValidateImages=function(){objImagesLocal[0].imagenlocal.imageslocalOne&&""!=objImagesLocal[0].imagenlocal.imageslocalTwo&&($scope.imageslocal=!0,$scope.methodP=!1,$.ajax({type:"POST",url:urlInserImages,timeout:2e3,data:{imgOne:objImagesLocal[0].imagenlocal.imageslocalOne,imgTwo:objImagesLocal[0].imagenlocal.imageslocalTwo,id:$scope.idUser[0].id},success:function(data){data_app=data},error:function(textStatus,err){console.log(textStatus+""+err)}}))},$scope.getmethodPay=function(obj){var method=obj.Pay.method;objMethodPay.push(method)},$scope.sendMethod=function(){$scope.methodP=!0,$scope.addHours=!1,insertMethodPay(objMethodPay)},$scope.validateBtnHour=function(btn){switch(btn){case"LV":$scope.lunesViernes=!1,$scope.lunesSabado=!0,$scope.Personalisation=!0;break;case"LS":$scope.lunesSabado=!1,$scope.Personalisation=!0,$scope.lunesViernes=!0;break;case"P":$scope.lunesSabado=!0,$scope.Personalisation=!1,$scope.lunesViernes=!0;break;case"all":$scope.lunesSabado=!1,$scope.Personalisation=!1,$scope.lunesViernes=!1}},$scope.octainselectweekdays=function(obj){switch(open=document.getElementById(`openMonday${obj}_id`).value,close=document.getElementById(`closeMonday${obj}_id`).value,obj){case"V":LunesVienes(),setTimeout(()=>{InsertHour()},2e3),$scope.addHours=!0,$scope.uploadImagesServer=!1,$scope.DoneEstablishment=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ");break;case"S":LunesSabado(),setTimeout(()=>{InsertHour()},2e3),$scope.addHours=!0,$scope.DoneEstablishment=!1,$scope.uploadImagesServer=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente ");break;default:alert("A ocurrido un eror contacte al admin de la pagina ")}},$scope.inputHours=function(obj){day=obj.d.id,HoursA=document.getElementById(obj.d.id_HoursA).value,HoursC=document.getElementById(obj.d.id_HoursC).value;var HourOpen=`${HoursA}:00`,HourClose=`${HoursC}:00`;objHoursEstablishment.push({horario:{dia:day,horaEntrada:HourOpen,horaCierre:HourClose}})},$scope.sendHour=function(){var horario={Lunes:objHoursEstablishment[0].horario.dia,L_apertura:objHoursEstablishment[0].horario.horaEntrada+":00",L_cierre:objHoursEstablishment[0].horario.horaCierre+":00",Martes:objHoursEstablishment[1].horario.dia,M_apertura:objHoursEstablishment[1].horario.horaEntrada+":00",M_cierre:objHoursEstablishment[1].horario.horaCierre+":00",Miercoles:objHoursEstablishment[2].horario.dia,Mi_apertura:objHoursEstablishment[2].horario.horaEntrada+":00",Mi_cierre:objHoursEstablishment[2].horario.horaCierre+":00",Jueves:objHoursEstablishment[3].horario.dia,J_apertura:objHoursEstablishment[3].horario.horaEntrada+":00",J_cierre:objHoursEstablishment[3].horario.horaCierre+":00",Viernes:objHoursEstablishment[4].horario.dia,V_apertura:objHoursEstablishment[4].horario.horaEntrada+":00",V_cierre:objHoursEstablishment[4].horario.horaCierre+":00",Sabado:objHoursEstablishment[5].horario.dia,S_apertura:objHoursEstablishment[5].horario.horaEntrada+":00",S_cierre:objHoursEstablishment[5].horario.horaCierre+":00",Domingo:objHoursEstablishment[5].horario.dia,D_apertura:objHoursEstablishment[5].horario.horaEntrada+":00",D_cierre:objHoursEstablishment[5].horario.horaCierre+":00",id:$scope.idUser[0].id};$.ajax({type:"POST",url:UrlInsertHour,timeout:2e3,data:horario,success:function(data){data_app=data.result.Database[0].Table.Row[0],$scope.idUser=data_app,$scope.DoneEstablishment=!1,alertify.set("notifier","position","top-right"),alertify.success("Se Guardaron los datos correctamente "),doneInsert()},error:function(textStatus,err){console.log(textStatus+""+err)}})},""!=$scope.Users&&null!=$scope.Users||(location.href="/")}]);
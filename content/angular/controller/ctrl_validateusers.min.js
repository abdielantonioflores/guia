app.controller("ctrl_validateUsers", ["$scope", function (a) {
  function e(c) {
    $.ajax({
      type: "POST", url: Urluser, timeout: 2000, data: c, headers: { TOKEN: akumahello() }, success: function (b) {
        a.data_app = b.result.Database[0].Table.Row[0];
        a.message = b.result.Database[0].Table.Row[0].message;
        if (0 != a.data_app.length && null != a.data_app[0].nombre) {
          b = a.data_app[0].nombre;
          var c = a.data_app[0].apellido, d = a.data_app[0].id;
          $("#sesion").modal("hide");
          f(b, c, d);
        } else {
          alertify.error("Usuario no Registrado Intente Nuevamente"), a.messagehide = !1, a.message = " ";
        }
      }, error: function (a, c) {
        console.log(a + "" + c);
      }
    });
  }
  function f(c, b, e) {
    a.sesionli = !0;
    a.useradmin = !1;
    a.nameuser = c;
    a.firstuser = b;
    alertify.set("notifier", "position", "top-left");
    alertify.notify("Bienvenido " + c + "  " + b, function () {
      $("#sesion").modal("hide");
    });
    objname.push({ id: e, nombre: a.nameuser, apellido: a.firstuser });
    localStorage.setItem("datos", JSON.stringify(objname));
    d();
    location.reload();
  }
  function d() {
    users != [] && null != users && (data = JSON.parse(users), a.sesionli = !0, a.useradmin = !1, a.nameuser = data[0].nombre, a.firstuser = data[0].apellido, a.idusuarios = data[0].id);
  }
  function g(a) {
    1 === a ? location.href = "/create-service" : alertify.alert("Guia Look", "solo personas con acseso pueden ingresar a esta pagina !", function () {
      alertify.warning("Ok");
    });
  }
  a.data_app = "";
  a.sesionli = !1;
  a.useradmin = !0;
  a.messagehide = !0;
  a.nameuser = "";
  a.firstuser = "";
  a.idRol = JSON.parse(users);
  a.validateuser = function () {
    var a = document.getElementById("email").value, b = document.getElementById("password").value;
    "" != a && "" != b && e({ email: a, password: b });
  };
  a.closeSesion = function () {
    data = JSON.parse(users);
    localStorage.clear();
    users = null;
    a.sesionli = !1;
    a.useradmin = !0;
    location.reload();
  };
  a.rolAdmin = function () {
    null !== a.idRol ? $.ajax({
      type: "POST", url: "/api/user-exist/json", timeout: 2000, data: { id: a.idRol[0].id }, success: function (c) {
        a.result = c.result.Database[0].Table.Row[0];
        g(a.result[0].message);
      }, error: function (a, b) {
        console.log(a + "" + b);
      }
    }) : alertify.alert("Guia Look", "Usted no tiene permiso para acceder a esta opcion ", function () {
      $("#sesion").modal("show");
    });
  };
  d();
  "" != a.nameuser && logoutSesionInteracting();
}]);
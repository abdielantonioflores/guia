app.controller("ctrl_validateUsers",["$scope",function($scope){function sendInformationUser(dataUser){$.ajax({type:"POST",url:Urluser,timeout:2e3,data:dataUser,headers:{TOKEN:akumahello()},success:function(data){if($scope.data_app=data.result.Database[0].Table.Row[0],$scope.message=data.result.Database[0].Table.Row[0].message,0!=$scope.data_app.length&&null!=$scope.data_app[0].nombre){let nameuser,apellidosuser,idusers;userExist($scope.data_app[0].nombre,$scope.data_app[0].apellido,$scope.data_app[0].id)}else userNotFound()},error:function(textStatus,err){console.log(textStatus+""+err)}})}function userExist(nameuser,apellidosuser,idusers){$("#sesion").modal("hide"),modalwelcome(nameuser,apellidosuser,idusers)}function userNotFound(){alertify.error("Usuario no Registrado Intente Nuevamente"),$scope.messagehide=!1,$scope.message=" "}function modalwelcome(nameuser,apellidosuser,idusers){$scope.sesionli=!0,$scope.useradmin=!1,$scope.nameuser=nameuser,$scope.firstuser=apellidosuser,alertify.set("notifier","position","top-left"),alertify.notify(`Bienvenido ${nameuser}  ${apellidosuser}`,function(){$("#sesion").modal("hide")}),objname.push({id:idusers,nombre:$scope.nameuser,apellido:$scope.firstuser}),localStorage.setItem("datos",JSON.stringify(objname)),userSesionExist(),location.reload()}function userSesionExist(){users!=[]&&null!=users&&(data=JSON.parse(users),$scope.sesionli=!0,$scope.useradmin=!1,$scope.nameuser=data[0].nombre,$scope.firstuser=data[0].apellido,$scope.idusuarios=data[0].id)}function UserinteractingActive(){""!=$scope.nameuser&&logoutSesionInteracting()}function validateRol(access){1===access?location.href="/create-service":alertify.alert("Guia Look","solo personas con acseso pueden ingresar a esta pagina !",function(){alertify.warning("Ok")})}$scope.data_app="",$scope.sesionli=!1,$scope.useradmin=!0,$scope.messagehide=!0,$scope.nameuser="",$scope.firstuser="",$scope.idRol=JSON.parse(users),$scope.validateuser=function(){var email=document.getElementById("email").value,password=document.getElementById("password").value,dataUser;""!=email&&""!=password&&sendInformationUser({email:email,password:password})},$scope.closeSesion=function(){data=JSON.parse(users),localStorage.clear(),users=null,$scope.sesionli=!1,$scope.useradmin=!0,location.reload()},$scope.rolAdmin=function(){null!==$scope.idRol?$.ajax({type:"POST",url:"/api/user-exist/json",timeout:2e3,data:{id:$scope.idRol[0].id},success:function(data){var access;$scope.result=data.result.Database[0].Table.Row[0],validateRol($scope.result[0].message)},error:function(textStatus,err){console.log(textStatus+""+err)}}):alertify.alert("Guia Look","Usted no tiene permiso para acceder a esta opcion ",function(){$("#sesion").modal("show")})},userSesionExist(),UserinteractingActive()}]);